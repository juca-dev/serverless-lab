# Serverless Lab | Step 02

Review 

---

## Features

- [ ] Fix `.gitignore` (set root folder, avoid cdk file)
- [ ] Fix lambda name (`src/cdk/index.ts`)
  - [ ] Destroy lambda by CDK
  - [ ] Fix build to avoid old versions (`package.json`)
  - [ ] Deploy by CDK
- [ ] Optimize `src/cdk/lambda.ts`
  - [ ] Adjust props to use `StackProps`
  - [ ] Update call on `src/cdk/index`
  - [ ] Rename `alias` > `stage`
- [ ] Update CDK to typescript
  - [ ] Update `cdk.json`
  - [ ] Update `src/cdk/index.ts` to get `SRC_ROOT` from `dist` folder
- [ ] Present Deploy flow
  - [ ] Show how each environment maps to a workflow
  - [ ] Explain separation of resources by stage
  - [ ] Demonstrate promotion flow (dev → stg → prd)
- [ ] Repais `main` workflow
  - [ ] Rename **env.STAGE** to `live`
- [ ] Create `dev` workflow
  - [ ] Clone `.github/workflows/main.yml`
  - [ ] Set **branch** to `dev`
  - [ ] Set **env.AWS_REGION** to `us-east-2`
- [ ] Create a test API with parameter
  - [ ] Add route to `test/api.ts`
  - [ ] Deploy it
  - [ ] Call api
  - [ ] Change the response
  - [ ] Deploy it
  - [ ] Call api
- [ ] Present Lambda + Alias flow
  - [ ] Explain the difference between `$LATEST`, version, and alias
  - [ ] Show how deployments point to an alias
  - [ ] Demonstrate rollback to a previous version
  - [ ] Rollback by `alias` to previos version
  - [ ] Call api

---

## Step 02
- [ ] Create `cdk/api`
- [ ] Update `cdk/lambda`
  - [ ] Move `formatName` to outside of class
  - [ ] Create `getFunctionByAlias` function
  - [ ] Remove `Function URL`
- [ ] Include api in `cdk/index`
- [ ] Deploy
- [ ] Update `README.md`